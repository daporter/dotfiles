# Paths
set mbox_type = Maildir
set header_cache = ~/.mutt/cache/headers
set message_cachedir = ~/.mutt/cache/bodies
set certificate_file = ~/.mutt/certificates

# Account settings
set folder = ~/mail/migadu
set from = "David Porter <david@daporter.net>"
set realname = "David Porter"
set spoolfile = "+inbox"
set postponed = "+drafts"
set record = "+sent"
set mbox = "+archive"
set trash = "+trash"

mailboxes =inbox \
		  =aerc \
		  =great-conversation \
    	  =openbsd-misc \
		  =suckless-dev \
		  =spam

# Mailcap
auto_view text/html
alternative_order text/plain text/enriched text/html
set mailcap_sanitize = yes

# Sidebar
set sidebar_visible = no
set sidebar_format = "%B%?F? [%F]?%* %?N?%N?"
set sidebar_divider_char = " │ "
set mail_check_stats = yes

# Receiving
set timeout = 3

# Messages
set delete = yes
set confirmappend = no
set confirmcreate = yes
set mime_forward = no
set resolve = no 
set envelope_from = yes
set fcc_attach = yes

# Header options
ignore *
unignore From To CC Bcc Subject Date Organization X-Label X-Mailer User-Agent
unhdr_order *
hdr_order from: to: cc: date: subject:

# Composing
set editor = "vim +'/^$' +'setlocal textwidth=72 colorcolumn=72 formatoptions=twan12 spell' +noh"
set abort_nosubject = no
set askcc = no 
set edit_headers = yes
set text_flowed = yes
set sig_dashes = yes
bind editor \Cp history-up
bind editor \Cn history-down
bind editor <Tab> complete-query
bind compose p postpone-message

# Replying
set fast_reply = yes
set reply_to = yes
set include = ask-yes
set reverse_name = yes
set include = yes
set attribution = "On %d, %n wrote:"

# Forwarding
set forward_format = "Fwd: %s"
set forward_decode = yes
set forward_quote = yes

# Status bar
set status_chars  = " *%A"
# set status_format = "───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"
set status_format='───%v: %f───(%P)───%>─[Msgs:%?M?%M/?%m%?n? New:%n?%?o? Del:%d?%?F? Flag:%F?%?t? Tag:%t?%?p? Post:%p?%?b? Inc:%b?%?l??]───'

# Index view
set date_format = "%d/%m/%y"
set sort = threads
set sort_re = yes
set uncollapse_jump = yes
set reply_regexp = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"
folder-hook . 'push <collapse-all>'
folder-hook .    "set index_format = \"[%Z]  %D  %-20.20f  %2M %s\""
folder-hook sent "set index_format = \"[%Z]  %D  %-20.20F  %2M %s\""
bind index <esc>V noop
bind index <esc>v noop
bind index \Cn noop
bind index \Cp noop
bind index g noop
bind index gg first-entry
bind index G last-entry
bind index \CF next-page
bind index \CB previous-page
bind index \Cu half-up
bind index \Cd half-down
bind index n search-next
bind index N search-opposite
bind index R group-reply
bind index D delete-message
bind index P purge-message # skip trash, remove permanently
bind index U undelete-message # also works as unpurge
bind index F flag-message # "star" message
bind index S save-message # TODO save where? Is this for archiving?
bind index R group-reply
bind index \Cl sidebar-toggle-visible
bind index \Cp sidebar-prev
bind index \Cn sidebar-next
bind pager \Co sidebar-open
bind index p recall-message
macro index \Cr "T~U<enter><tag-prefix><clear-flag>N<untag-pattern>.<enter>" "mark all messages as read"
macro index a "<save-message>><enter>" "archive message"

# Pager view
set pager_index_lines = 10
set pager_context = 3
set pager_stop = yes
set menu_scroll = yes
set tilde  = yes
set markers = no
set reflow_text = yes
set quote_regexp = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"
set pager_format='───%F: %s%*─(%P)'
bind pager g noop
bind pager gg top
bind pager G bottom
bind pager k previous-line
bind pager j next-line
bind pager \CF next-page
bind pager \CB previous-page
bind pager \Cu half-up
bind pager \Cd half-down
bind pager F flag-message # "star" message
bind pager S save-message # TODO save where? Is this for archiving?
bind pager R group-reply
bind pager \Cl sidebar-toggle-visible
bind pager \Cp sidebar-prev
bind pager \Cn sidebar-next
bind pager \Co sidebar-open
macro pager a "<save-message>><enter>" "archive message"
macro pager S "<exit><tag-thread><tag-prefix><save-message>"
macro pager \Cu <pipe-entry>extract_url<enter> "view URLs"

# Attachments
bind attach <return> view-mailcap
bind attach g noop
bind attach gg first-entry
bind attach \CF next-page
bind attach \CB previous-page
bind attach \Cu half-up
bind attach \Cd half-down

# Browser
bind browser g noop
bind browser gg first-entry
bind browser G last-entry
bind browser \CF next-page
bind browser \CB previous-page
bind browser \Cu half-up
bind browser \Cd half-down

source $HOME/.mutt/colours.mutt
