# WM INDEPENDENT KEYBINDINGS

# Environment
#
# The prefix `super + e' is a mnemonic for "environment".
super + e ; {m, p, s, x}
    { \
    ~/bin/configure_monitors, \
    ~/bin/polybar_start, \
    pkill -USR1 -x sxhkd && notify-send -i key_bindings "Reloaded key bindings", \
    xrdb -I "$HOME" -merge "$HOME"/.Xresources \
    }

super + e ; d ; {q, Q, c, h}
     dunstctl {close,close-all,context,history-pop}

super + e ; d ; p
     ~/bin/dunst_toggle_notify

super + Return
    xterm

super + @space
	rofi -show drun

# Application switching

super + {1, 2, 3, 4}
      ~/bin/raise_or_run { \
                         emacs.Emacs emacs, \
                         Navigator.Firefox firefox, \
                         xterm.XTerm xterm, \
                         anki.Anki anki \
                         }

# Web searches

super + z ; {g, w, m, o, l, r}
     ~/bin/websearch { \
                     --google, \
                     --wikipedia, \
                     --googlemaps, \
                     --oxford, \
                     --onelook, \
                     --wordreference \
                     }

super + shift + z ; {g, w, m, o, l, r}
     ~/bin/websearch -p { \
                        --google, \
                        --wikipedia, \
                        --googlemaps, \
                        --oxford, \
                        --onelook, \
                        --wordreference \
                        }

#
# BSPWM KEYBINDINGS
#

# quit/restart bspwm
super + shift + {Escape}
	bspc {quit}

# close and kill
super + {_,shift + }w
	bspc node -{c,k}

# alternate between the tiled and monocle layout
super + m
	bspc desktop -l next

# send the newest marked node to the newest preselected node
super + y
	bspc node newest.marked.local -n newest.!automatic.local

# swap the current node and the biggest window
super + g
	bspc node -s biggest.window

#
# STATE/FLAGS
#

# set the window state
super + {t,shift + t,s,f}
	bspc node -t {tiled,pseudo_tiled,floating,fullscreen}

# set the node flags
super + ctrl + {m,x,y,z}
	bspc node -g {marked,locked,sticky,private}

#
# FOCUS/SWAP
#

# Focus the node in the given direction.
super + {h, j, k, l}
	bspc node --focus {west, south, north, east}

# Swap the current node with the node in the given direction.
super + shift + {h, j, k, l}
    bspc node --swap {west, south, north, east}

# Focus the node for the given path jump.
super + {p, b, comma, period}
	bspc node --focus @{parent, brother, first, second}

# Focus the next/previous window in the current desktop.
super + {_, shift +} n
	bspc node --focus {next, prev}.local.!hidden.window

# Focus the next/previous desktop in the current monitor.
super + {less, greater}
	bspc desktop --focus {prev, next}.local

# Focus the last node/desktop.
super + {Tab, grave}
	bspc {node, desktop} --focus last

# Focus the older or newer node in the focus history.
super + {o, i}
	bspc wm --record-history off; \
	bspc node {older,newer} --focus; \
	bspc wm --record-history on

# Focus or send to the given desktop.
super + {_, shift + } {1-9,0}
	bspc {desktop --focus, node --to-desktop} '^{1-9,10}'

#
# PRESELECT
#

# Preselect the direction.
super + ctrl + {h,j,k,l}
	bspc node --presel-dir {west, south, north, east}

# Preselect the ratio.
super + ctrl + {1-9}
	bspc node --presel-ratio 0.{1-9}

# Cancel the preselection for the focused node.
super + ctrl + space
	bspc node --presel-dir cancel

# Cancel the preselection for the focused desktop.
super + ctrl + shift + space
	bspc query -N -d | xargs -I id -n 1 bspc node id -p cancel

#
# MOVE/RESIZE
#

# Expand a window by moving one of its side outward.
super + alt + {h, j, k, l}
	bspc node --resize {left -20 0, bottom 0 20, top 0 -20, right 20 0}

# Contract a window by moving one of its side inward.
super + alt + shift + {h, j, k, l}
	bspc node --resize {right -20 0, top 0 20, bottom 0 -20, left 20 0}

# Move a floating window.
super + {Left, Down, Up, Right}
	bspc node --move {-20 0, 0 20, 0 -20, 20 0}
