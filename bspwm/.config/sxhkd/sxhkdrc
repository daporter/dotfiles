#
# SXHKD module with WM-agnostic keys
#

# Index with key chord chain mnemonics
# ====================================
#
# Key chord chains are used for less common or ancillary commands, or
# for when assigning direct keybindings would become unwieldy. The idea
# is to scope bindings so as to avoid conflicts.
#
# Environment: super + e ; ...
# Executables which typically run in a terminal: super + x ; ...
# Graphical applications: super + g ; ...
# Assign (node flags): super + a ; ...
# Split (split ratios): super + s ; ...

# Environment
# -----------

# The following commands are:
#
# c == toggle compton (display compositor)
# d == dmenu to quickly edit dotfiles
# f == bspwm focus mode
# s == reload sxhkd
# p == reload melonpanel (my lemonbar script)
# t == dmenu to choose Tempus theme
# q == dmenu interface to log out, lock, switch users, reboot, shutdown
# x == reload the Xresources file
super + e ; {c,d,f,s,p,t,q,x}
	{ \
	toggle_compton, \
	dotsmenu, \
	bspwm_focus_mode, \
	pkill -USR1 -x sxhkd && notify-send "Reloaded key bindings", \
	melonpanel, \
	tempusmenu, \
	poweroptionsmenu, \
	xrdb -merge "$HOME/.Xresources" \
	}

# Provide a hotkey to run the script for deactivating the external
# display and activating the laptop display.
super + BackSpace
    extmonitor disconnect

# ........................................................ Main programs

# Terminal emulator with and without TMUX. I normally use `tmux` which
# is ideal for working on multiple terminals, switching sessions, and
# the like. I think it fits perfectly into a console-based workflow and
# complements the features of a tiling WM. No need to spawn tens of
# terminals, like a barbarian! Watch my screen cast on the matter:
# https://protesilaos.com/codelog/2019-01-13-tmux-demo-bspwm/
super + {_, shift + } Return
	{xterm -e tmux new-session -A -s 'Default', xterm}

# ............................................... Commonly-used programs

super + c ; m
    emacsclient --create-frame --eval '(gnus)'
super + c ; n
    emacsclient --create-frame --eval '(elfeed)'
super + c ; w
	notify-send -i firefox "Launching Firefox" && firefox
      
# ......................................................... GUI programs

# GUI programs. Where these are alternatives to common CLI tools they
# are mapped to the same number as their counterparts, but prepended
# with a `g` (mnemonic for GUI).
super + g ; {1}
	notify-send -i firefox "Launching Firefox" && firefox

# CLI programs. Any browser and/or file manager should be assigned the
# numbers 1 and 2 respectively, in order to keep consistency with the
# above-defined GUIs.
super + x ; {3-4}
	xterm -e {neomutt,newsboat}

# I use "my_float_window" as an application name or class for those rare
# occasions where I prefer a floating window at launch.
super + x ; 0
	xterm -class "my_float_window" -e calc

# Bring up the help text for common keybindings
super + {F1,Home}
	xterm -class "my_float_window" \
	-geometry '100x30' -e less "$HOME/.config/sxhkd/cheatsheet_sxhkdrc.txt"

# sbgmenu: dmenu interface for browsing images from my "Pictures"
# directory.  There is an option to just display the selected file, or
# set it as the new desktop wallpaper.
#
# nbm: similar to the above, but uses a graphical approach, by
# displaying all image thumbnails in a grid layout using `sxiv`.  The
# user can view each image individually and mark images.  If only one is
# marked, it is defined as the new wallpaper, else another grid is drawn
# with just the marked files.
#
# Watch this screen cast for `sbgmenu` and `nbm`:
# https://protesilaos.com/codelog/2019-02-09-unix-ways-wallpapers/

# NOTE the keys are mnemonics for Backgrounds, Wallpapers, Tasks.
super + x; {w}
    {nbm}

# dmenu_run and passmenu using my custom colours.
super + {d,p}
    {own_script_run_dmenu_xcolors,own_script_run_passmenu_xcolors}

# ............................................................... Media controls

# Raise and lower the volume in small steps
super + Up
	mixerctl -q outputs.master=+20,+20
super + Down
	mixerctl -q outputs.master=-20,-20
