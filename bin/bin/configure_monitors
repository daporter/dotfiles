#!/bin/sh
#
# Connect to or disconnect from an external monitor.
#
# NOTE: Assumes the external monitor is connected via DisplayPort and is
# therefore named DP-1.

_external_is_connected () {
	xrandr --query | grep -q 'DP-1 connected'
}

_switch() {
	xrandr --output "$1" --off
	xrandr --output "$2" --auto --primary
}

_switch_to_external () {
	_switch LVDS-1 DP-1
}

_switch_to_built_in () {
	_switch DP-1 LVDS-1
}

_reconfigure_wallpaper () {
	"$HOME"/.fehbg
}

if _external_is_connected; then
	_switch_to_external
else
	_switch_to_built_in
fi
_reconfigure_wallpaper
