#!/bin/sh
#
# Connect to or disconnect from an external monitor.
#
# NOTE: Assumes the external monitor is connected via DisplayPort and is
# therefore named DP1.

_is_connected() {
	xrandr --query | grep "^$1 connected" >/dev/null
}

_switch() {
	_is_connected "$1" && xrandr --output "$1" --off
	xrandr --output "$2" --auto --primary
	"$HOME/.fehbg"
}

case $1 in
	connect)
		_is_connected DP-1 && _switch LVDS-1 DP-1
		;;
	disconnect)
		_switch DP-1 LVDS-1
		;;
	*)
		echo "Usage: $0 connect|disconnect" >&2
		exit 1
		;;
esac
