#!/bin/bash
#
# Update all installed Homebrew packages and casks.

readonly BREW=/usr/local/bin/brew

err() {
    echo "$@" >&2
}

run_cmd() {
    local cmd="$1"
    echo
    echo "* Running '$cmd'..."
    if ! $cmd; then
        err "Unable to run '$cmd'"
        exit 1
    fi
}

main() {
    run_cmd "$BREW update"
    run_cmd "$BREW outdated"
    run_cmd "$BREW upgrade"
    run_cmd "$BREW cask outdated"
    run_cmd "$BREW cask upgrade"
    run_cmd "$BREW cleanup"
}

main
