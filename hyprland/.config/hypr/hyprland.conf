# Refer to the wiki for more information.
# https://wiki.hypr.land/Configuring/

#         name, resolution, position, scale
monitor = DP-1, 2560x1440@120Hz, auto, 1.25

exec-once = hyprpaper
exec-once = waybar
exec-once = hypridle
exec-once = wlsunset -l -35.3 -L 149.1 -t 3700 -T 5500

exec-once = swaync
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=Hyprland
exec-once = hyprctl setcursor Nordzy-cursors-white 24
exec-once = gsettings set org.gnome.desktop.interface cursor-theme 'Nordzy-cursors-white'
exec-once = gsettings set org.gnome.desktop.interface cursor-size 24

# From instructions at https://wiki.hypr.land/Hypr-Ecosystem/hyprpolkitagent/
exec-once = systemctl --user start hyprpolkitagent

exec-once = 1password --silent

exec-once = gnome-keyring-daemon --start --components=secrets

env = SSH_AUTH_SOCK, $XDG_RUNTIME_DIR/gcr/ssh

exec-once = goldendict --group-name Main --popup-group-name Popup
env = GOLDENDICT_FORCE_WAYLAND, 1

env = XCURSOR_THEME,            Nordzy-cursors-white
env = XCURSOR_SIZE,             24
env = HYPRCURSOR_THEME,         Nordzy-cursors-white
env = HYPRCURSOR_SIZE,          24
env = QT_QPA_PLATFORMTHEME,     qt6ct

# Force all apps to use Wayland
env = GDK_BACKEND,                      wayland,x11,*
env = QT_QPA_PLATFORM,                  wayland;xcb
env = SDL_VIDEODRIVER,                  wayland
env = MOZ_ENABLE_WAYLAND,               1
env = ELECTRON_OZONE_PLATFORM_HINT,     wayland
env = OZONE_PLATFORM,                   wayland
env = XDG_SESSION_TYPE,                 wayland

# Allow better support for screen sharing (Google Meet, Discord, etc)
env = XDG_CURRENT_DESKTOP,              Hyprland
env = XDG_SESSION_DESKTOP,              Hyprland

# Font rendering
env = FREETYPE_PROPERTIES,              truetype:interpreter-version=38
env = GDK_SCALE,                        1.25
env = GDK_DPI_SCALE,                    0.8
env = QT_AUTO_SCREEN_SCALE_FACTOR,      1
env = QT_SCALE_FACTOR,                  1.25

general {
    gaps_in             = 3
    gaps_out            = 6
    border_size         = 2
    no_focus_fallback   = true
    resize_on_border    = true
    col.active_border   = rgba(268bd2ff)
    col.inactive_border = rgba(93a1a1ff)
    layout              = master

    # Please see https://wiki.hypr.land/Configuring/Tearing/ before you turn this on
    allow_tearing       = false
}

decoration {
    rounding    = 3

    blur {
        enabled = false
    }
}

# https://wiki.hypr.land/Configuring/Variables/#group
group {
    col.border_locked_active    = -1
    col.border_locked_inactive  = -1

    groupbar {
        font_size                       = 12
        font_family                     = sans-serif
        font_weight_active              = ultraheavy
        font_weight_inactive            = normal
        indicator_height                = 0
        indicator_gap                   = 5
        height                          = 22
        gaps_in                         = 5
        gaps_out                        = 0
        gradients                       = true
        gradient_rounding               = 0
        gradient_round_only_edges       = false
    }
}

animations {
    enabled     = yes

    # Smooth bezier curves
    bezier      = myBezier,     0.05, 0.7, 0.1,  1.0
    bezier      = easeOutQuint, 0.22, 1.0, 0.36, 1.0

    # Increased durations to make animations more noticeable
    animation   = windows,    0.7, 4, myBezier,     popin
    animation   = windowsOut, 0.6, 3, default,      popin 80%
    animation   = border,     0.4, 3, default
    animation   = fade,       0.4, 3, default
    animation   = workspaces, 0.8, 3, easeOutQuint, slide
}

dwindle {
    # Master switch for pseudotiling. Enabling is bound to mainMod + P in the
    # keybinds section below
    pseudotile          = true
    preserve_split      = true  # You probably want this
    force_split         = 2     # Always split on the right
}

master {
    new_status  = master
}

# https://wiki.hypr.land/Configuring/Variables/#misc
misc {
    force_default_wallpaper             = 0
    animate_mouse_windowdragging        = true
    animate_manual_resizes              = true
    disable_splash_rendering            = true
    focus_on_activate                   = true
}

cursor {
    hide_on_key_press   = true
}

# https://wiki.hypr.land/Configuring/Variables/#input
input {
    kb_layout           = us
    kb_variant          =
    kb_model            =
    kb_options          = compose:menu
    kb_rules            =
    repeat_delay        = 300
    repeat_rate         = 90
    follow_mouse        = 1
    left_handed         = true
    sensitivity         = -0.6

    touchpad {
        natural_scroll  = false
    }
}

# See https://wiki.hypr.land/Configuring/Gestures
gesture         = 3, horizontal, workspace

# Window rules for applications
windowrulev2    = suppressevent maximize, class:.*

# GoldenDict popup - float and centre (title without hyphen)
windowrulev2    = float,        class:.*goldendict_ng$, title:.* - GoldenDict-ng$
windowrulev2    = center,       class:.*goldendict_ng$, title:.* - GoldenDict-ng$
windowrulev2    = size 800 600, class:.*goldendict_ng$, title:.* - GoldenDict-ng$

windowrulev2    = workspace 3, class:^(obsidian)$

#
# KEYBINDINGS
#

# App launching
bind = Super,                   Space,  exec, wofi --show drun
bind = Super+Ctrl,              Return, exec, kitty
bind = Super,                   B,      exec, firefox
bind = Super+Ctrl,              D,      exec, goldendict --popup $(wl-paste -n -p)
bind = Super,                   E,      exec, emacsclient
bind = Super+Ctrl,              E,      exec, emacs
bind = Super,                   O,      exec, obsidian
bind = Super+Ctrl,              S,      exec, hyprshot -m window
bind = Super+Ctrl+Shift,        S,      exec, hyprshot -m region

# Window management
bind = Super,       F,     fullscreen, 0 toggle
bind = Super,       P,     pin
bind = Super,       W,     killactive
bind = Super+Shift, Space, togglefloating

bind = Super,       Return, layoutmsg, swapwithmaster master
bind = Super,       E,      layoutmsg, cycleprev
bind = Super,       I,      layoutmsg, cyclenext
bind = Super+Shift, E,      layoutmsg, swapprev
bind = Super+Shift, I,      layoutmsg, swapnext
bind = Super+Shift, R,      layoutmsg, addmaster
bind = Super+Shift, D,      layoutmsg, removemaster

# Window resizing
binde = Super+Shift, left,  resizeactive, -20   0
binde = Super+Shift, right, resizeactive,  20   0
binde = Super+Shift, up,    resizeactive,   0 -20
binde = Super+Shift, down,  resizeactive,   0  20

bindm = Super, mouse:272, movewindow
bindm = Super, mouse:273, resizewindow

# Workspaces
bind = Super,  H,  workspace, +1
bind = Super,  A,  workspace, -1
bind = Super,  1,  workspace,  1
bind = Super,  2,  workspace,  2
bind = Super,  3,  workspace,  3
bind = Super,  4,  workspace,  4
bind = Super,  5,  workspace,  5
bind = Super,  6,  workspace,  6
bind = Super,  7,  workspace,  7
bind = Super,  8,  workspace,  8
bind = Super,  9,  workspace,  9
bind = Super, Tab, workspace, previous

bind = Super+Shift,  H, movetoworkspace, +1
bind = Super+Shift,  A, movetoworkspace, -1
bind = Super+Shift,  1, movetoworkspace,  1
bind = Super+Shift,  2, movetoworkspace,  2
bind = Super+Shift,  3, movetoworkspace,  3
bind = Super+Shift,  4, movetoworkspace,  4
bind = Super+Shift,  5, movetoworkspace,  5
bind = Super+Shift,  6, movetoworkspace,  6
bind = Super+Shift,  7, movetoworkspace,  7
bind = Super+Shift,  8, movetoworkspace,  8
bind = Super+Shift,  9, movetoworkspace,  9

# Application-specific animation
layerrule = noanim, walker
